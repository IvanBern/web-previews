import"./style-B96b9GXS.js";const o={"+":"add","-":"subtract","*":"multiply",x:"multiply",X:"multiply","/":"divide","รท":"divide",Enter:"equals","=":"equals",Enter_Legacy:"equals",Backspace:"clear",Delete:"clear",Escape:"clear","%":"percent"},e={displayValue:"0",firstOperand:null,waitingForSecondOperand:!1,operator:null},n=document.getElementById("calculator-display"),c=document.querySelector(".calculator__grid"),p=new Map(Array.from(document.querySelectorAll("[data-operator]")).map(a=>[a.dataset.operator,a]));function i(){if(!n)return;const a=e.displayValue;n.textContent=a}function l(){p.forEach(a=>{a.classList.remove("is-active"),a.setAttribute("aria-pressed","false")})}function d(a){if(l(),!a)return;const t=p.get(a);t&&(t.classList.add("is-active"),t.setAttribute("aria-pressed","true"))}function f(){e.displayValue="0",e.firstOperand=null,e.waitingForSecondOperand=!1,e.operator=null,l(),i()}function y(a){e.waitingForSecondOperand?(e.displayValue=a,e.waitingForSecondOperand=!1):e.displayValue=e.displayValue==="0"?a:e.displayValue+a,i()}function V(){if(e.waitingForSecondOperand){e.displayValue="0.",e.waitingForSecondOperand=!1,i();return}e.displayValue.includes(".")||(e.displayValue+=".",i())}function S(){e.displayValue!=="0"&&(e.displayValue=e.displayValue.startsWith("-")?e.displayValue.slice(1):`-${e.displayValue}`,i())}function b(){const a=parseFloat(e.displayValue);Number.isNaN(a)||(e.displayValue=(a/100).toString(),i())}function g(a,t,r){switch(r){case"add":return a+t;case"subtract":return a-t;case"multiply":return a*t;case"divide":return t===0?0:a/t;default:return t}}function m(a){const t=parseFloat(e.displayValue);if(e.operator&&e.waitingForSecondOperand){e.operator=a,d(a);return}if(e.firstOperand==null&&!Number.isNaN(t))e.firstOperand=t;else if(e.operator){const r=g(e.firstOperand,t,e.operator);e.displayValue=`${parseFloat(r.toFixed(10))}`,e.firstOperand=parseFloat(e.displayValue),i()}e.waitingForSecondOperand=!0,e.operator=a,d(a)}function F(){const a=parseFloat(e.displayValue);if(e.operator==null||e.firstOperand==null||Number.isNaN(a))return;const t=g(e.firstOperand,a,e.operator);e.displayValue=`${parseFloat(t.toFixed(10))}`,e.firstOperand=null,e.operator=null,e.waitingForSecondOperand=!1,l(),i()}function w(a){switch(a){case"clear":f();break;case"sign":S();break;case"percent":b();break;case"decimal":V();break;case"equals":F();break}}function k(a){const t=a.target.closest("button");if(!t)return;const r=t.dataset.digit,s=t.dataset.action,u=t.dataset.operator;if(r){y(r);return}if(u){m(u);return}s&&w(s)}function h(a){const{key:t}=a;if(/^[0-9]$/.test(t)){y(t);return}if(t==="."){V();return}const r=o[t]??o[`${t}_Legacy`];r&&(r==="add"||r==="subtract"||r==="multiply"||r==="divide"?m(r):r==="equals"?F():w(r))}function v(){return!c||!n?null:(c.addEventListener("click",k),document.addEventListener("keydown",h),l(),i(),{clear:f})}v();
